language: php

arch:
- amd64
- ppc64le
- arm64

php:
- 7.4
- 8.0
- nightly

notifications:
  email:
  - team@appwrite.io

before_script: composer install --ignore-platform-reqs

matrix:
  include:
    - arch: amd64
      script: vendor/bin/phpunit --configuration phpunit.xml --testsuite X86
    - arch: ppc64le
      script: vendor/bin/phpunit --configuration phpunit.xml --testsuite PPC
    - arch: arm64
      script: vendor/bin/phpunit --configuration phpunit.xml --testsuite ARM

script:
- vendor/bin/phpunit --configuration phpunit.xml --testsuite General
- vendor/bin/psalm --show-info=true
